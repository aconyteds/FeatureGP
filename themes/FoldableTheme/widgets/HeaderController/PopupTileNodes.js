//>>built
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/dom-construct dojo/mouse dojo/query dijit/_WidgetBase dijit/_TemplatedMixin jimu/utils jimu/dijit/ViewStack".split(" "),function(l,h,g,k,e,r,m,n,p,s,q){return l([n,p],{baseClass:"jimu-header-more-popup",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"pages" data-dojo-attach-point\x3d"pagesNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"points"\x3e\x3cdiv class\x3d"points-inner"data-dojo-attach-point\x3d"pointsNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
margin:4,postCreate:function(){this.nodes=[];this.pages=[];this.createCloseBtn()},startup:function(){this.viewStack=new q({views:[],viewType:"dom"},this.pagesNode);this.viewStack.startup();this.createPages();0<this.viewStack.views.length&&this._selectPage(0);this.resize()},resize:function(){this.nodeWidth=(g.getMarginBox(this.domNode).w-2*this.margin)/3;this.nodes.forEach(h.hitch(this,function(b,d){this.setItemNodePosition(b,d)}))},setItemNodePosition:function(b,d){var a,c;d++;a=1===d%3?0:2;c=3>=
d?0:2;var f={};"number"===typeof this.nodeWidth&&(f.width=this.nodeWidth+"px",f.height=this.nodeWidth+"px");"number"===typeof a&&(f.marginLeft=a+"px");"number"===typeof c&&(f.marginTop=c+"px");g.setStyle(b,f)},createPages:function(){var b,d,a,c;b=Math.ceil(this.items.length/9);for(d=0;d<b;d++)a=this.createPageNode(d),this.createPageItems(d,a),this.viewStack.addView(a),1<b&&(c=this.createPointNode(d),k(c,"click",h.hitch(this,this._onPageNodeClick,d))),this.pages.push({pageNode:a,pointNode:c})},_onPageNodeClick:function(b){this._selectPage(b)},
_selectPage:function(b){1<this.pages.length&&(m(".point",this.domNode).removeClass("point-selected"),g.addClass(this.pages[b].pointNode,"point-selected"));this.viewStack.switchView(this.pages[b].pageNode)},createPageItems:function(b,d){var a,c,f,e;a=this.items.length;f=9*(b+1);e=f-a;for(c=9*b;c<Math.min(f,a);c++)this.createItemNode(c,d);for(c=a;c<a+e;c++)this.createEmptyItemNode(c,d)},createPageNode:function(){return e.create("div",{"class":"page"})},createPointNode:function(){return e.create("div",
{"class":"point"},this.pointsNode)},createItemNode:function(b,d){var a,c;c=this.items[b];a=e.create("div",{"class":"icon-node",title:c.label,settingId:c.id},d);e.create("img",{src:c.icon},a);e.create("div",{"class":"node-label",title:c.label,innerHTML:c.label},a);a.config=c;this.setItemNodePosition(a,b);k(a,"click",h.hitch(this,function(){this.onNodeClicked(a)}));this.nodes.push(a)},createEmptyItemNode:function(b,d){var a;a=e.create("div",{"class":"icon-node"},d);this.setItemNodePosition(a,b);this.nodes.push(a);
return a},createCloseBtn:function(){var b;b=e.create("div",{"class":"close"},this.domNode);e.create("div",{"class":"close-inner"},b);k(b,"click",h.hitch(this,function(){this.hide()}));return b},hide:function(){g.setStyle(this.domNode,"display","none")},show:function(){g.setStyle(this.domNode,"display","block")},onNodeClicked:function(b){this.hide()}})});