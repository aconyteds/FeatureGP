//>>built
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/topic dojo/dnd/move dijit/_TemplatedMixin jimu/BaseWidgetPanel dojox/layout/ResizeHandle".split(" "),function(h,f,a,p,g,q,k,l,m,n){return h([m,l],{baseClass:"jimu-widget-panel jimu-title-panel",_originalBox:null,widgetIcon:null,_onResize:!1,templateString:'\x3cdiv data-dojo-attach-point\x3d"boxNode"\x3e\x3cdiv class\x3d"title" data-dojo-attach-point\x3d"titleNode"\x3e\x3cdiv class\x3d"title-label jimu-vcenter-text"data-dojo-attach-point\x3d"titleLabelNode"\x3e${label}\x3c/div\x3e\x3cdiv class\x3d"close-btn jimu-vcenter" data-dojo-attach-point\x3d"closeNode"data-dojo-attach-event\x3d"onclick:_onCloseBtnClicked"\x3e\x3c/div\x3e\x3cdiv class\x3d"foldable-btn jimu-vcenter" data-dojo-attach-point\x3d"foldableNode"data-dojo-attach-event\x3d"onclick:_onFoldableBtnClicked"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_onFoldableBtnClicked:function(){this._getPositionInfo().isFull&&("block"===a.getStyle(this.containerNode,"display")?(a.setStyle(this.containerNode,"display","none"),a.removeClass(this.foldableNode,"pack-down"),a.addClass(this.foldableNode,"pack-up"),a.setStyle(this.domNode,{position:"absolute",top:"auto",bottom:0,left:0,right:0,height:"auto"})):(a.setStyle(this.containerNode,"display","block"),a.removeClass(this.foldableNode,"pack-up"),a.addClass(this.foldableNode,"pack-down"),a.setStyle(this.domNode,
{position:"absolute",left:0,top:0,width:"100%",height:"100%"})))},_onCloseBtnClicked:function(){a.setStyle(this.domNode,"display","none");this.panelManager.closePanel(this)},startup:function(){this.inherited(arguments);this._originalBox=a.getMarginBox(this.domNode);this.own(g(this.map,"click",f.hitch(this,function(){})));this.resizeHandle=(new n({targetId:this,minWidth:400,minHeight:410,activeResize:!1})).placeAt(this.domNode);this.resizeHandle.startup()},onOpen:function(){a.style(this.domNode,"display",
"none");this.resize();a.setStyle(this.domNode,"display","block");this.inherited(arguments)},resize:function(b){this.closeNode.style.marginTop="0px";var d=this._getPositionInfo();d.isFull?(this._fullPosition(),a.removeClass(this.titleNode,"title-normal"),a.addClass(this.titleNode,"title-full"),a.setStyle(this.resizeHandle.domNode,"display","none"),a.setStyle(this.foldableNode,"display","block"),"block"===a.getStyle(this.containerNode,"display")&&(a.removeClass(this.foldableNode,"pack-up"),a.addClass(this.foldableNode,
"pack-down"))):(a.removeClass(this.titleNode,"title-full"),a.addClass(this.titleNode,"title-normal"),a.setStyle(this.resizeHandle.domNode,"display","block"),a.setStyle(this.foldableNode,"display","none"),this._normalPosition(d.position,b));this.inherited(arguments)},destroy:function(){this.widgetIcon=null;this.inherited(arguments)},_getPositionInfo:function(){var b={isFull:!1,position:{left:0,top:0}},d=a.getMarginBox(jimuConfig.layoutId),c=a.getMarginBox(this.widgetIcon),e=c.l,f=d.w-e-c.w;if(e>=f)if(e>=
this._originalBox.w)b.position.left=e;else return b.isFull=!0,b;else if(f>=this._originalBox.w)b.position.left=e;else return b.isFull=!0,b;e=c.t;d=d.h-e-c.h;e>=d?e>=this._originalBox.h+3?b.position.top=c.t-this._originalBox.h-3:b.isFull=!0:d>=this._originalBox.h+3?b.position.top=c.t+c.h+3:b.isFull=!0;return b},_fullPosition:function(){a.place(this.domNode,jimuConfig.layoutId);"block"!==a.getStyle(this.containerNode,"display")&&a.setStyle(this.containerNode,"display","block");a.setStyle(this.domNode,
{left:0,width:"100%",top:0,bottom:0,height:"100%"});this.moveable&&(this.moveable.destroy(),this.moveable=null)},_normalPosition:function(b,d){a.place(this.domNode,jimuConfig.mapId);a.setStyle(this.containerNode,"display","block");var c=0,e=0;d?(c=d.w,e=d.h):(c=this._originalBox.w,e=this._originalBox.h);a.setStyle(this.domNode,{left:b.left+"px",top:b.top+"px",width:c+"px",height:e+"px"});this._moveableNode(200,100)},_moveableNode:function(b,d){this.moveable&&(this.moveable.destroy(),this.moveable=
null);var c=a.getMarginBox(jimuConfig.layoutId);c.l=c.l-b+d;c.w+=2*(b-d);this.moveable=new k.boxConstrainedMoveable(this.domNode,{box:c,handle:this.titleNode,within:!0});this.own(g(this.moveable,"Moving",f.hitch(this,this.onMoving)));this.own(g(this.moveable,"MoveStop",f.hitch(this,this.onMoveStop)))},onMoving:function(b){a.setStyle(b.node,"opacity",0.9)},onMoveStop:function(b){a.setStyle(b.node,"opacity",1)}})});