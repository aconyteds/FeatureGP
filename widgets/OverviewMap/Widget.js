//>>built
require({cache:{"esri/dijit/OverviewMap":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/html dojo/has dojo/sniff dojo/dom-class dojo/dom-style dojo/dnd/Moveable dijit/_Widget dijit/_Templated ../map ../geometry/Point ../geometry/ScreenPoint ../layers/TiledMapServiceLayer ../layers/DynamicMapServiceLayer ../layers/ArcGISTiledMapServiceLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/OpenStreetMapLayer ../virtualearth/VETiledLayer ../kernel ../config ../domUtils dojo/text!./templates/OverviewMap.html dojo/i18n!../nls/jsapi".split(" "),
function(g,d,l,f,n,m,h,c,e,q,A,x,p,r,B,v,u,t,s,w,z,F,C,E,D,b,k){return d([A,x],{declaredClass:"esri.dijit.OverviewMap",widgetsInTemplate:!0,templateString:b,basePath:g.toUrl(".")+"/",constructor:function(a,b){l.mixin(this,k.widgets.overviewMap);a=a||{};if(a.map){var c={};b&&(this._detached=!0,c=n.coords(b,!0));this.map=a.map;this.baseLayer=a.baseLayer;this.width=a.width||c.w||this.map.width/4;this.height=a.height||c.h||this.map.height/4;this.attachTo=a.attachTo||"top-right";this.expandFactor=a.expandFactor||
2;this.color=a.color||"#000000";this.opacity=a.opacity||0.5;this.maximizeButton=!!a.maximizeButton;this.visible=!!a.visible;if(this.map.loaded)this._initialSetup();else var e=f.connect(this.map,"onLoad",this,function(){f.disconnect(e);e=null;this._initialSetup()});this._detached&&(this.visible=!0);this._maximized=!1}else console.error("esri.dijit.OverviewMap: "+this.NLS_noMap)},startup:function(){this.inherited(arguments);this.domNode.parentNode||this.map.container.appendChild(this.domNode);this._detached?
(e.set(this._body,"display","block"),e.set(this._controllerDiv,"display","none"),e.set(this._maximizerDiv,"display","none"),this.map.loaded?this._initialize():f.connect(this.map,"onLoad",this,this._initialize)):("bottom"===this.attachTo.split("-")[0]&&this.domNode.insertBefore(this._maximizerDiv,this._controllerDiv),this.maximizeButton||c.add(this._maximizerDiv,"ovwDisabledButton"),c.add(this.domNode,{"top-left":"ovwTL","top-right":"ovwTR","bottom-left":"ovwBL","bottom-right":"ovwBR"}[this.attachTo]),
c.add(this._controllerDiv,"ovwShow"),c.add(this._maximizerDiv,"ovwMaximize"),this.visible&&this.map.loaded&&(this.visible=!1,this.show()));e.set(this._focusDiv,"opacity",this.opacity)},destroy:function(){this._deactivate();this.overviewMap&&this.overviewMap.destroy();this.overviewMap=this.baseLayer=null;this.inherited(arguments)},resize:function(a){a&&!(0>=a.w||0>=a.h)&&this._resize(a.w,a.h)},show:function(){if(!this.visible){var a=this._controllerDiv;a.title=this.NLS_hide;c.remove(a,"ovwShow");c.add(a,
"ovwHide");D.show(this._body);D.show(this._maximizerDiv);this._initialize();this.visible=!0}},hide:function(){if(this.visible){var a=this._controllerDiv;a.title=this.NLS_show;c.remove(a,"ovwHide");c.add(a,"ovwShow");this._maximized&&this._maximizeHandler();D.hide(this._body);D.hide(this._maximizerDiv);this._deactivate();this.visible=!1}},_initialSetup:function(){if(this._mainMapLayer=this.map.getLayer(this.map.layerIds[0])){var a=this.baseLayer||this._mainMapLayer,b=this.map.spatialReference,k=a.spatialReference;
if(k.wkid!==b.wkid&&k.wkt!==b.wkt)console.error("esri.dijit.OverviewMap: "+this.NLS_invalidSR);else{b=a.declaredClass;if(a instanceof v)if(-1!==b.indexOf("VETiledLayer"))this.baseLayer=new F({resourceInfo:a.getResourceInfo(),culture:a.culture,mapStyle:a.mapStyle,bingMapsKey:a.bingMapsKey});else if(-1!==b.indexOf("OpenStreetMapLayer"))this.baseLayer=new z({tileServers:a.tileServers});else if(-1!==b.indexOf("WebTiledLayer")){var b=a.initialExtent,k=a.fullExtent,c=a.tileInfo;this.baseLayer=new a.constructor(a.urlTemplate,
{initialExtent:b&&new b.constructor(b.toJson()),fullExtent:k&&new k.constructor(k.toJson()),tileInfo:c&&new c.constructor(c.toJson()),tileServers:a.tileServers&&a.tileServers.slice(0)})}else this.baseLayer=new t(a.url,{resourceInfo:a.getResourceInfo()});else if(a instanceof u)-1!==b.indexOf("ArcGISImageServiceLayer")?this.baseLayer=new w(a.url):(this.baseLayer=new s(a.url),this.baseLayer.setImageFormat("png24"));else{console.error("esri.dijit.OverviewMap: "+this.NLS_invalidType);return}!this._detached&&
(this.visible&&this._controllerDiv)&&(a=function(){this.visible=!1;this.show()},this.baseLayer.loaded?a.call(this):f.connect(this.baseLayer,"onLoad",this,a))}}else console.error("esri.dijit.OverviewMap: "+this.NLS_noLayer)},_visibilityHandler:function(){this.visible?this.hide():this.show()},_maximizeHandler:function(){var a=this._maximizerDiv;this._maximized?(a.title=this.NLS_maximize,c.remove(a,"ovwRestore"),c.add(a,"ovwMaximize"),this._resize(this.width,this.height)):(a.title=this.NLS_restore,c.remove(a,
"ovwMaximize"),c.add(a,"ovwRestore"),this._resize(this.map.width,this.map.height));this._maximized=!this._maximized},_resize:function(a,b){e.set(this._body,{width:a+"px",height:b+"px"});var k=E.defaults.map.panDuration,c=this.overviewMap;E.defaults.map.panDuration=0;c&&(c.resize(!0),c.centerAt(this._focusExtent.getCenter()));E.defaults.map.panDuration=k},_initialize:function(){if(this.overviewMap)this._activate();else{var a;a=this.overviewMap=new p(this.id+"-map",{slider:!1,showAttribution:!1,logo:!1,
lods:this._overviewLods,wrapAround180:this.map.wrapAround180});f.connect(a,"onLoad",this,function(){this._map_resize_override=l.hitch(a,this._map_resize_override);a.disableMapNavigation();this._activate()});a.addLayer(this.baseLayer)}},_activate:function(){var a=this.map,b=this.overviewMap;this._moveableHandle=new q(this._focusDiv);this._soeConnect=f.connect(a,"onExtentChange",this,this._syncOverviewMap);this._ufoConnect=f.connect(a,"onPan",this,this._updateFocus);this._oecConnect=f.connect(b,"onExtentChange",
this,this._ovwExtentChangeHandler);this._opaConnect=f.connect(b,"onPan",this,this._ovwPanHandler);this._ozsConnect=f.connect(b,"onZoomStart",this,function(){D.hide(this._focusDiv)});this._ozeConnect=f.connect(b,"onZoomEnd",this,function(){D.show(this._focusDiv)});this._omsConnect=f.connect(this._moveableHandle,"onMoveStop",this,this._moveStopHandler);this._syncOverviewMap(a.extent,null,null,null)},_deactivate:function(){f.disconnect(this._soeConnect);f.disconnect(this._ufoConnect);f.disconnect(this._oecConnect);
f.disconnect(this._opaConnect);f.disconnect(this._ozsConnect);f.disconnect(this._ozeConnect);f.disconnect(this._omsConnect);this._moveableHandle&&this._moveableHandle.destroy()},_syncOverviewMap:function(a,b,k,c){this._suspendPanHandling?this._suspendPanHandling=!1:(this._focusExtent=a,this.overviewMap.setExtent(a.expand(this.expandFactor),!0))},_updateFocus:function(a){this._suspendPanHandling||(this._focusExtent=a,this._drawFocusDiv(a))},_drawFocusDiv:function(a,b){var k=this.overviewMap,c=k.toScreen(new r(a.xmin,
a.ymax,k.spatialReference)),d=k.toScreen(new r(a.xmax,a.ymin,k.spatialReference)),k=d.x-c.x,d=d.y-c.y,v=!0;k>this.overviewMap.width&&d>this.overviewMap.height&&(v=!1);e.set(this._focusDiv,{left:c.x+(b?b.x:0)+"px",top:c.y+(b?b.y:0)+"px",width:k+"px",height:d+"px",display:v?"block":"none"})},_moveStopHandler:function(a){var b=this._moveableHandle.node.style;a=this._focusExtent;var k=this.overviewMap,b=k.toMap(new B(parseInt(b.left,10),parseInt(b.top,10))),c=new r(a.xmin,a.ymax,k.spatialReference);this._focusExtent=
a.offset(b.x-c.x,b.y-c.y);this._maximized?this._maximizeHandler():k.centerAt(this._focusExtent.getCenter());this._suspendPanHandling=!0;this.map.setExtent(this._focusExtent)},_ovwExtentChangeHandler:function(){this._drawFocusDiv(this._focusExtent)},_ovwPanHandler:function(a,b){this._drawFocusDiv(this._focusExtent,b)}})})},"esri/layers/ArcGISImageServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/has dojo/io-query ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../SpatialReference ./MosaicRule ./DynamicMapServiceLayer ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters ../geometry/Polygon".split(" "),
function(g,d,l,f,n,m,h,c,e,q,A,x,p,r,B,v,u,t,s,w,z,F,C,E,D){return g(s,{declaredClass:"esri.layers.ArcGISImageServiceLayer",_eventMap:{"rendering-change":!0,"mosaic-rule-change":!0},constructor:function(b,k){this._url=r.urlToObject(b);var a=k&&k.imageServiceParameters;this.format=a&&a.format;this.interpolation=a?a.interpolation:null;this.compressionQuality=a?a.compressionQuality:null;this.bandIds=a?a.bandIds:null;this.mosaicRule=a?a.mosaicRule:null;this.renderingRule=a?a.renderingRule:null;this._params=
d.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},a?a.toJson():{});this._initLayer=d.hitch(this,this._initLayer);this._queryVisibleRastersHandler=d.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this.useMapImage=k&&k.useMapImage||!1;this.infoTemplate=k&&k.infoTemplate;this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._loadCallback=
k&&k.loadCallback;(a=k&&k.resourceInfo)?this._initLayer(a):x({url:this._url.path,content:d.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(b,k){this._findCredential();(this.credential&&this.credential.ssl||b&&b._ssl)&&this._useSSL();var a=this.minScale,c=this.maxScale;d.mixin(this,b);this.minScale=a;this.maxScale=c;this.initialExtent=this.fullExtent=this.extent=
new B(b.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);for(var e=this.minValues,v=this.maxValues,h=this.meanValues,f=this.stdvValues,u=this.bands=[],a=0,c=this.bandCount;a<c;a++)u[a]={min:e[a],max:v[a],mean:h[a],stddev:f[a]};this.timeInfo=(a=this.timeInfo)&&a.timeExtent?new w(a):null;c=this.fields=[];if(e=b.fields)for(a=0;a<e.length;a++)c.push(new z(e[a]));this.version=b.currentVersion;this.version||
(this.version="fields"in b||"objectIdField"in b||"timeInfo"in b?10:9.3);A.isDefined(b.minScale)&&!this._hasMin&&this.setMinScale(b.minScale);A.isDefined(b.maxScale)&&!this._hasMax&&this.setMaxScale(b.maxScale);a={};b.defaultMosaicMethod?(a.method=b.defaultMosaicMethod,a.operation=b.mosaicOperator,a.sortField=b.sortField,a.sortValue=b.sortValue):a.method=t.METHOD_NONE;this.defaultMosaicRule=new t(a);this.defaultMosaicRule.ascending=!0;10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(d.hitch(this,
function(a){a&&(a.features&&0<a.features.length)&&(this._rasterAttributeTableFeatures=d.clone(a.features));a&&(a.fields&&0<a.fields.length)&&(this._rasterAttributeTableFields=d.clone(a.fields))}));this.loaded=!0;this.onLoad(this);if(a=this._loadCallback)delete this._loadCallback,a(this)},getKeyProperties:function(){var b=this._url.path+"/keyProperties",k=new l(p._dfdCanceller);10<this.version?(k._pendingDfd=x({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),k._pendingDfd.then(function(a){k.callback(a)},
function(a){k.errback(a)})):(b=Error("Layer does not have key properties"),b.log=m.isDebug,k.errback(b));return k},getRasterAttributeTable:function(){var b=this._url.path+"/rasterAttributeTable",k=new l(p._dfdCanceller);10<this.version&&this.hasRasterAttributeTable?(k._pendingDfd=x({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),k._pendingDfd.then(function(a){k.callback(a)},function(a){k.errback(a)})):(b=Error("Layer does not support raster attribute table"),b.log=m.isDebug,
k.errback(b));return k},_getRasterAttributeTableFeatures:function(){var b=new l;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return b.resolve(this._rasterAttributeTableFeatures),b;if(10<this.version&&this.hasRasterAttributeTable)return b=this.getRasterAttributeTable(),b.then(d.hitch(this,function(b){b&&(b.features&&0<b.features.length)&&(this._rasterAttributeTableFeatures=d.clone(b.features))})),b;b.resolve(this._rasterAttributeTableFeatures);return b},getCustomRasterFields:function(b){var c=
b?b.rasterAttributeTableFieldPrefix:"",a={name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeString"};b=this.fields?d.clone(this.fields):[];var e=b.length;b[e]={name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeString"};if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)b[e+1]=a;this._rasterAttributeTableFields&&0<this._rasterAttributeTableFields.length&&
(a=f.filter(this._rasterAttributeTableFields,function(a){return"esriFieldTypeOID"!==a.type&&"value"!==a.name.toLowerCase()}),a=f.map(a,function(a){var b=d.clone(a);b.name=c+a.name;return b}),b=b.concat(a));return b},getImageUrl:function(b,k,a,e){var v=b.spatialReference.wkid||n.toJson(b.spatialReference.toJson());delete this._params._ts;var h=this._url.path+"/exportImage?";d.mixin(this._params,{bbox:b.xmin+","+b.ymin+","+b.xmax+","+b.ymax,imageSR:v,bboxSR:v,size:k+","+a},this.disableClientCaching?
{_ts:(new Date).getTime()}:{});var f=this._params.token=this._getToken();b=r.addProxy(h+c.objectToQuery(d.mixin(this._params,{f:"image"})));b.length>q.defaults.io.postLength||this.useMapImage?this._jsonRequest=x({url:h,content:d.mixin(this._params,{f:"json"}),callbackParamName:"callback",load:function(a,b){var c=a.href;f&&(c+=-1===c.indexOf("?")?"?token\x3d"+f:"\x26token\x3d"+f);e(r.addProxy(c))},error:this._errorHandler}):e(b)},onRenderingChange:function(){},onMosaicRuleChange:function(){},setInterpolation:function(b,
c){this.interpolation=this._params.interpolation=b;c||this.refresh(!0)},setCompressionQuality:function(b,c){this.compressionQuality=this._params.compressionQuality=b;c||this.refresh(!0)},setBandIds:function(b,c){var a=!1;this.bandIds!==b&&(a=!0);this.bandIds=b;this._params.bandIds=b.join(",");if(a&&!c)this.onRenderingChange();c||this.refresh(!0)},setDefaultBandIds:function(b){this.bandIds=this._params.bandIds=null;b||this.refresh(!0)},setDisableClientCaching:function(b){this.disableClientCaching=
b},setMosaicRule:function(b,c){var a=!1;this.mosaicRule!==b&&(a=!0);this.mosaicRule=b;this._params.mosaicRule=n.toJson(b.toJson());if(a&&!c)this.onMosaicRuleChange();c||this.refresh(!0)},setRenderingRule:function(b,c){var a=!1;this.renderingRule!==b&&(a=!0);this.renderingRule=b;this._params.renderingRule=b?n.toJson(b.toJson()):null;if(a&&!c)this.onRenderingChange();c||this.refresh(!0)},setImageFormat:function(b,c){this.format=this._params.format=b;c||this.refresh(!0)},setInfoTemplate:function(b){this.infoTemplate=
b},setDefinitionExpression:function(b,c){var a=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?a=this.defaultMosaicRule.toJson():a.method=t.METHOD_NONE);a.where=b;a=new t(a);this.setMosaicRule(a,c);return this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null},refresh:function(b){if(b)this.inherited(arguments);else{var c=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=
c}},exportMapImage:function(b,c){var a=q.defaults.map,a=d.mixin({size:a.width+","+a.height},this._params,b?b.toJson(this.normalization):{},{f:"json"});delete a._ts;this._exportMapImage(this._url.path+"/exportImage",a,c)},queryVisibleRasters:function(b,c,a,e){var d=this._map,h=p._fixDfd(new l(p._dfdCanceller));this._visibleRasters=[];var f,u,t=!0,g;if(this.infoTemplate&&this.infoTemplate.info.fieldInfos&&0<this.infoTemplate.info.fieldInfos.length){t=!1;g=this.infoTemplate.info;for(f=0;f<g.fieldInfos.length;f++)if((u=
g.fieldInfos[f])&&"raster.servicepixelvalue"!==u.fieldName.toLowerCase()&&(u.visible||g.title&&-1<g.title.toLowerCase().indexOf(u.fieldName.toLowerCase()))){t=!0;break}}f=new E;f.geometry=b.geometry;f.returnGeometry=this._map.spatialReference.equals(this.spatialReference);f.returnCatalogItems=t;f.timeExtent=b.timeExtent;f.mosaicRule=this.mosaicRule?this.mosaicRule:null;f.renderingRule=this.renderingRule?this.renderingRule:null;d&&(b=new v((d.extent.xmax-d.extent.xmin)/(2*d.width),(d.extent.ymax-d.extent.ymin)/
(2*d.height),d.extent.spatialReference),f.pixelSize=b);var n=this;b=new C(this.url);(h._pendingDfd=b.execute(f)).addCallbacks(function(b){n._queryVisibleRastersHandler(b,c,a,e,h)},function(a){n._resolve([a],null,e,h,!0)});return h},_queryVisibleRastersHandler:function(b,c,a,e,h){function v(){var b=this.getCustomRasterFields(c),e=this._getDomainFields(b),l=c?c.returnDomainValues:!1,m=c&&c.rasterAttributeTableFieldPrefix,q,p,n,r,s,w,z,x;this._getRasterAttributeTableFeatures().then(d.hitch(this,function(b){for(q=
0;q<g.length;q++){y=g[q];y.setInfoTemplate(this.infoTemplate);y._layer=this;if(u&&(p=u,t&&t.length>=q&&(n=t[q],p=n.replace(/ /gi,", ")),y.attributes["Raster.ItemPixelValue"]=p,y.attributes["Raster.ServicePixelValue"]=u,b&&0<b.length&&(r=f.filter(b,function(a){if(a&&a.attributes)return a.attributes.hasOwnProperty("Value")?a.attributes.Value==p:a.attributes.VALUE==p}),0<r.length&&(s=d.clone(r[0]),m&&s)))){x={};for(w in s.attributes)s.attributes.hasOwnProperty(w)&&(z=m+w,x[z]=s.attributes[w]);s.attributes=
x;y.attributes=d.mixin(y.attributes,s.attributes)}l&&(e&&0<e.length)&&f.forEach(e,function(a){if(a){var b=y.attributes[a.name];A.isDefined(b)&&(b=this._getDomainValue(a.domain,b),A.isDefined(b)&&(y.attributes[a.name]=b))}},this);C.push(y);this._visibleRasters.push(y)}this._resolve([C,null,!0],null,a,h)}))}var u=b.value,t,g,l=0,m=0,q=this,p=this.objectIdField,r;if(b.catalogItems){e=0;var w,z,s=b.catalogItems.features.length;w=0;g=Array(s);t=Array(s);r=Array(s);for(l=0;l<s;l++)-1<b.properties.Values[l].toLowerCase().indexOf("nodata")&&
w++;w=s-w;for(l=0;l<s;l++)z=-1<b.properties.Values[l].toLowerCase().indexOf("nodata")?w++:e++,g[z]=b.catalogItems.features[l],t[z]=b.properties.Values[l],r[z]=g[z].attributes[p]}this._visibleRasters=[];var y;b=-1<u.toLowerCase().indexOf("nodata");u&&(!g&&!b)&&(p="ObjectId",g=[],y=new F(new B(this.fullExtent),null,{ObjectId:0}),g.push(y));var C=[];g?!this._map.spatialReference.equals(this.spatialReference)&&r&&0<r.length?x({url:this._url.path+"/query",content:{f:"json",objectIds:r.join(","),returnGeometry:!0,
outSR:n.toJson(q._map.spatialReference.toJson()),outFields:p},handleAs:"json",callbackParamName:"callback",load:function(b){if(0===b.features.length)q._resolve([C,null,null],null,a,h);else{for(l=0;l<b.features.length;l++)for(m=0;m<g.length;m++)g[m].attributes[p]==b.features[l].attributes[p]&&(g[m].geometry=new D(b.features[l].geometry),g[m].geometry.setSpatialReference(q._map.spatialReference));v.call(q)}},error:function(b){q._resolve([C,null,null],null,a,h)}}):v.call(this):this._resolve([C,null,
null],null,a,h)},getVisibleRasters:function(){var b=this._visibleRasters,c=[],a;for(a in b)b.hasOwnProperty(a)&&c.push(b[a]);return c},_getDomainFields:function(b){if(b){var c=[];f.forEach(b,function(a){if(a.domain){var b={};b.name=a.name;b.domain=a.domain;c.push(b)}});return c}},_getDomainValue:function(b,c){if(b&&b.codedValues){var a;f.some(b.codedValues,function(b){return b.code===c?(a=b.name,!0):!1});return a}},_resolve:function(b,c,a,e,d){c&&this[c].apply(this,b);a&&a.apply(null,b);e&&p._resDfd(e,
b,d)}})})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point".split(" "),function(g,d,l,f,n,m){var h=g(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,multidimensionalDefinition:[],constructor:function(c){d.isObject(c)&&(d.mixin(this,c),c.mosaicMethod&&(this.method=c.mosaicMethod),this.method&&"esri"!==
this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),c.mosaicOperation&&(this.operation=c.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),c.fids&&(this.objectIds=c.fids),c.viewpoint&&(this.viewpoint=new m(c.viewpoint)))},toJson:function(){var c=null,e=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(e)for(var c=[],d=0;d<e;d++)c.push("esri.layers.DimensionalDefinition"===
this.multidimensionalDefinition[d].declaredClass?this.multidimensionalDefinition[d].toJson():this.multidimensionalDefinition[d]);c={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation,multidimensionalDefinition:c};return n.filter(c,function(c){if(null!==c)return!0})},_getMethodEnum:function(c){if(c){var e=
h.METHOD_NONE;switch(c.toLowerCase()){case "byattribute":e=h.METHOD_ATTRIBUTE;break;case "center":e=h.METHOD_CENTER;break;case "lockraster":e=h.METHOD_LOCKRASTER;break;case "nadir":e=h.METHOD_NADIR;break;case "northwest":e=h.METHOD_NORTHWEST;break;case "seamline":e=h.METHOD_SEAMLINE;break;case "viewpoint":e=h.METHOD_VIEWPOINT}return e}},_getOperatorEnum:function(c){if(c)switch(c.toLowerCase()){case "first":return h.OPERATION_FIRST;case "last":return h.OPERATION_LAST;case "max":return h.OPERATION_MAX;
case "min":return h.OPERATION_MIN;case "blend":return h.OPERATION_BLEND;case "mean":return h.OPERATION_MEAN}}});d.mixin(h,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",
OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND"});return h})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),function(g,d,l,f,n,m,h,c){g=g(h,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(c){this._url.path+="/identify";this._handler=d.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],
_handler:function(e,d,f,h,g){try{var l=new c(e);this._successHandler([l],"onComplete",f,g)}catch(m){this._errorHandler(m,h,g)}},execute:function(c,f,h,g){var l=g.assembly;c=this._encode(d.mixin({},this._url.query,{f:"json"},c.toJson(l&&l[0])));var m=this._handler,B=this._errorHandler;return n({url:this._url.path,content:c,callbackParamName:"callback",load:function(c,d){m(c,d,f,h,g.dfd)},error:function(c){B(c,h,g.dfd)}})},onComplete:function(){}});m._createWrappers(g);return g})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),
function(g,d,l,f,n,m){return g(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",constructor:function(d){d.catalogItems&&(this.catalogItems=new m(d.catalogItems));d.location&&(this.location=n.fromJson(d.location));this.catalogItemVisibilities=d.catalogItemVisibilities;this.name=d.name;this.objectId=d.objectId;this.value=d.value;this.properties=d.properties}})})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),
function(g,d,l,f,n,m,h){return g(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,toJson:function(c){var d=c&&c.geometry||this.geometry;c={geometry:d,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?l.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?l.toJson(this.renderingRule.toJson()):
null};d&&(c.geometryType=h.getJsonType(d));d=this.timeExtent;c.time=d?d.toJson().join(","):null;m.isDefined(this.pixelSizeX)&&m.isDefined(this.pixelSizeY)?c.pixelSize=l.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(c.pixelSize=this.pixelSize?l.toJson(this.pixelSize.toJson()):null);return c}})})},"esri/virtualearth/VETiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/_base/config dojo/has dojo/string dojo/_base/Deferred ../kernel ../urlUtils ../SpatialReference ../layers/TileInfo ../layers/TiledMapServiceLayer ../geometry/Extent ../request".split(" "),
function(g,d,l,f,n,m,h,c,e,q,A,x,p,r,B){g=g(p,{declaredClass:"esri.virtualearth.VETiledLayer",constructor:function(c){try{c=d.mixin({bingMapsKey:null,culture:"en-US"},c||{});var e=window.location.protocol;"file:"===e&&(e="http:");this.url=e+"//dev.virtualearth.net/REST/v1";this._url=q.urlToObject(this.url);this.spatialReference=new A({wkid:102100});this.tileInfo=new x({rows:256,cols:256,dpi:96,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,
scale:2.95828763795777E8},{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},
{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,
scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]});this.initialExtent=this.fullExtent=new r(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new A({wkid:102100}));d.mixin(this,c);this.hasAttributionData=this.showAttribution;this._initLayer=d.hitch(this,this._initLayer);this._errorHandler=d.hitch(this,this._errorHandler);this._getTileInfo=d.hitch(this,this._getTileInfo);if(this.bingMapsKey)this._getTileInfo();else throw Error("BingMapsKey must be provided.");
}catch(f){throw this.onError(f),f;}},_unsetMap:function(c,d){this.inherited("_unsetMap",arguments)},_getTileInfo:function(){if(this.mapStyle){var c=this._url.path+"/Imagery/Metadata/"+this.mapStyle;if(this.bingMapsKey){var e=this.resourceInfo;!this.loaded&&e?this._initLayer(e):B({url:c,content:d.mixin({},{key:this.bingMapsKey,ss:!0,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,error:this._errorHandler})}}},_initLayer:function(c,
d){if(200!==c.statusCode){var e=Error();e.code=c.statusCode;e.message=c.statusDescription;e.details=c.errorDetails;e.authenticationResultCode=c.authenticationResultCode;this.onError(e)}else try{this.resourceInfo=l.toJson(c);var e=c.resourceSets[0].resources[0],g=e.imageUrl.replace("{","${");this.tileServers=f.map(e.imageUrlSubdomains,function(c){var d=window.location.protocol;"file:"===d&&(d="http:");return h.substitute(g,{subdomain:c}).replace("http:",d)});this._tsLength=this.tileServers.length;
if(this.loaded)this.refresh(),this.onMapStyleChange();else{this.copyright=this.copyright||"\x26copy; 2012 Microsoft Corporation and its data suppliers";this.loaded=!0;this.onLoad(this);var m=this.loadCallback;m&&(delete this.loadCallback,m(this))}}catch(n){this.onError(n)}},getAttributionData:function(){var e=new c,f=l.fromJson(this.resourceInfo),g;this.hasAttributionData&&f&&(g=d.getObject("resourceSets.0.resources.0.imageryProviders",!1,f));g?e.callback({contributors:g}):(f=Error("Layer does not have attribution data"),
f.log=n.isDebug,e.errback(f));return e},getTileUrl:function(c,d,e){return h.substitute(this.tileServers[d%this._tsLength].replace(/\{/g,"${"),{quadkey:this._getQuadKey(c,d,e),culture:this.culture,token:this.bingMapsKey})},_getQuadKey:function(c,d,e){var f="",g,h;for(h=c;0<h;h--)c="0",g=1<<h-1,0!=(e&g)&&c++,0!=(d&g)&&(c++,c++),f+=c;return f},setMapStyle:function(c){this.mapStyle=c;this._getTileInfo()},setCulture:function(c){this.culture=c;this._getTileInfo()},setBingMapsKey:function(c){this.bingMapsKey=
c},onMapStyleChange:function(){}});d.mixin(g,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});return g})},"widgets/OverviewMap/_build-generate_module":function(){define(["dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:esri/dijit/templates/OverviewMap.html":'\x3cdiv class\x3d"esriOverviewMap"\x3e\n  \x3cdiv class\x3d"ovwContainer" dojoattachpoint\x3d"_body" style\x3d"width: ${width}px; height: ${height}px;"\x3e\n    \x3cdiv id\x3d"${id}-map" style\x3d"width: 100%; height: 100%;"\x3e\n      \x3cdiv class\x3d"ovwHighlight" dojoattachpoint\x3d"_focusDiv" title\x3d"${NLS_drag}" style\x3d"border: 1px solid ${color}; background-color: ${color};"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"ovwButton ovwController" title\x3d"${NLS_show}" dojoattachpoint\x3d"_controllerDiv" dojoattachevent\x3d"onclick: _visibilityHandler"\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"ovwButton ovwMaximizer" title\x3d"${NLS_maximize}" dojoattachpoint\x3d"_maximizerDiv" dojoattachevent\x3d"onclick: _maximizeHandler"\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:widgets/OverviewMap/config.json":'{\n  "overviewMap":{\n    "visible": false\n  },\n  "minWidth": 200,\n  "minHeight": 150,\n  "maxWidth": 400,\n  "maxHeight": 300\n}',"*now":function(g){g(['dojo/i18n!*preload*widgets/OverviewMap/nls/Widget*["ar","cs","da","de","en","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/aspect jimu/BaseWidget esri/dijit/OverviewMap jimu/utils dojo/dom-style".split(" "),function(g,d,l,f,n,m,h){return g([f],{name:"OverviewMap",overviewMapDijit:null,startup:function(){this.inherited(arguments);this.createOverviewMap();this.own(l.after(this.overviewMapDijit,"show",d.hitch(this,"_afterOverviewShow")));this.own(l.after(this.overviewMapDijit,"hide",d.hitch(this,"_afterOverviewHide")));this.domNode.appendChild(this.overviewMapDijit.domNode);
this.overviewMapDijit.visible&&this._afterOverviewShow()},createOverviewMap:function(c){var e=this.config.overviewMap;e.map=this.map;void 0!==c&&(e.visible=c);this.position&&(void 0!==this.position.top&&void 0!==this.position.left?e.attachTo="top-left":void 0!==this.position.top&&void 0!==this.position.right?e.attachTo="top-right":void 0!==this.position.bottom&&void 0!==this.position.left?e.attachTo="bottom-left":void 0!==this.position.bottom&&void 0!==this.position.right&&(e.attachTo="bottom-right"));
e.width=this.getWidth();e.height=this.getHeight();this.overviewMapDijit=new n(e);this.overviewMapDijit.startup();c={left:"auto",right:"auto",top:"auto",bottom:"auto",width:"auto"};d.mixin(c,this.position);h.set(this.overviewMapDijit.domNode,m.getPositionStyle(c))},getWidth:function(){void 0===this.config.minWidth&&(this.config.minWidth=200);void 0===this.config.maxWidth&&(this.config.maxWidth=400);var c=this.map.width/4;c<this.config.minWidth?c=this.config.minWidth:c>this.config.maxWidth&&(c=this.config.maxWidth);
return c},onReceiveData:function(c){"BasemapGallery"===c&&(this.overviewMapDijit.destroy(),this.createOverviewMap(this.overviewMapDijit.visible))},getHeight:function(){void 0===this.config.minHeight&&(this.config.minHeight=150);void 0===this.config.maxHeight&&(this.config.maxHeight=300);var c=this.map.height/4;c<this.config.minHeight?c=this.config.minHeight:c>this.config.maxHeight&&(c=this.config.maxHeight);return c},onClose:function(){this.overviewMapDijit.destroy()},_afterOverviewHide:function(){h.set(this.domNode,
{width:"auto",height:"auto"})},_afterOverviewShow:function(){h.set(this.domNode,{width:this.overviewMapDijit.width+"px",height:this.overviewMapDijit.height+"px"})}})});