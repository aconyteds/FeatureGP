//>>built
require({cache:{"widgets/Geocoder/setting/Edit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/Message jimu/dijit/GeocodeServiceChooser dojo/text!./Edit.html dijit/form/ValidationTextBox".split(" "),function(d,g,p,n,b,a,c,h,m,k,s){return d([h,c],{baseClass:"jimu-geocoder-Edit",singleLineFieldName:null,validService:!1,templateString:s,postCreate:function(){this.inherited(arguments);
this.serviceChooser=(new k({url:this.config.url||""})).placeAt(this.serviceChooser);this.own(n(this.geocodeName,"Change",g.hitch(this,"_onGeocodeNameChange")));this.own(n(this.serviceChooser,"ok",g.hitch(this,"_onServiceChooserOk")));this._setConfig(this.config)},startup:function(){this.inherited(arguments);this.serviceChooser.startup()},_setConfig:function(a){a.url&&(this.validService=!0);a.name&&this.geocodeName.set("value",a.name);a.singleLineFieldName&&(this.singleLineFieldName=a.singleLineFieldName);
a.placeholder&&this.geocodePlaceholder.set("value",a.placeholder)},getConfig:function(){return{url:this.serviceChooser.getUrl(),name:this.geocodeName.get("value"),singleLineFieldName:this.singleLineFieldName,placeholder:this.geocodePlaceholder.get("value")}},_onGeocodeNameChange:function(){this._checkRequiredField()},_onServiceChooserOk:function(a){(a=a.definition)&&a.singleLineAddressField&&a.singleLineAddressField.name?(this.singleLineFieldName=a.singleLineAddressField.name,this.validService=!0):
(new m({message:this.nls.warning}),this.singleLineFieldName="",this.validService=!1);this._checkRequiredField()},_checkRequiredField:function(){!this.validService||!this.geocodeName.get("value")?this.popup&&this.popup.disableButton(0):this.popup&&this.popup.enableButton(0)}})})},"jimu/dijit/GeocodeServiceChooser":function(){define(["dojo/_base/declare","./_BasicServiceChooser","./_GeocodeServiceChooserContent"],function(d,g,p){return d([g],{baseClass:"jimu-geocode-service-chooser",_createServiceChooserContent:function(d){return new p(d)}})})},
"jimu/dijit/_BasicServiceChooser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooser.html dojo/Evented dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/Deferred dijit/TooltipDialog dijit/popup dijit/form/ValidationTextBox jimu/dijit/LoadingIndicator esri/request".split(" "),function(d,g,p,n,b,a,c,h,m,k,s,e,f,q,x,l){return d([g,p,n,a],{templateString:b,url:"",postMixInProperties:function(){this.nls=
m.mixin({},window.jimuNls.common);this.nls=m.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-basic-service-chooser");this._initSelf()},setUrl:function(a){this.url=a;var b=new s;this.url&&"string"===typeof this.url?(this.urlTextBox.set("value",this.url),b=l({url:this.url,handleAs:"json",content:{f:"json"},callbackParamName:"callback"})):setTimeout(m.hitch(this,function(){b.reject("Invalid url.")}),0);return b},getUrl:function(){return this.urlTextBox.get("value")},
_initSelf:function(){this.scc=this._createServiceChooserContent({multiple:!1,url:this.url});this.own(k(this.scc,"ok",m.hitch(this,this._onOk)));this.own(k(this.scc,"cancel",m.hitch(this,this._onCancel)));var a=c.create("div");this.tooltipDialog=new e({content:a});this.scc.placeAt(a);this.url&&"string"===typeof this.url&&this.urlTextBox.set("value",this.url)},_createServiceChooserContent:function(a){},_onBtnSetSourceClick:function(a){a.stopPropagation();a.preventDefault();f.close(this.tooltipDialog);
f.open({popup:this.tooltipDialog,around:this.urlTextBox.domNode})},_onOk:function(a){var b=a[0];this.urlTextBox.set("value",b.url);f.close(this.tooltipDialog);b.definition?this.emit("ok",b):l({url:b.url,handleAs:"json",callbackParamName:"callback",content:{f:"json"}}).then(m.hitch(this,function(a){b.definition=a;this.emit("ok",b)}))},_onCancel:function(){f.close(this.tooltipDialog);this.emit("cancel")},destroy:function(){this.scc&&this.scc.destroy();this.scc=null;this.tooltipDialog&&this.tooltipDialog.destroy();
this.tooltipDialog=null;this.inherited(arguments)}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(d,g,p){return d([g],{baseClass:"jimu-geocode-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(d){return new p(d)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(d,g,p,n,b,a,c,h,m,k,s,e,f,q,x){return d([g,p,n,a],{templateString:b,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=k.mixin({},window.jimuNls.common);this.nls=k.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
h.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf()},setUrl:function(a){var b=new c;(this.url=a)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),b=this._onBtnValidateClick()):b.reject();return b},_initSelf:function(){this._examples&&0<this._examples.length?m.forEach(this._examples,k.hitch(this,function(a){h.create("div",{innerHTML:a,style:{"white-space":"normal","word-wrap":"break-word","word-break":"break-all","font-size":"13px"}},
this.exampleTd)})):h.setStyle(this.exampleTr,"display","none");var a={multiple:this.multiple,_onTreeClick:k.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(a);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(e.after(this.urlInput,"validator",k.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url)},_createServiceBrowser:function(a){},_afterUrlValidate:function(a){a?
h.removeClass(this.btnValidate,"jimu-state-disabled"):h.addClass(this.btnValidate,"jimu-state-disabled");return a},_onBtnValidateClick:function(){var a=new c;if(this.urlInput.validate()){var b=this.urlInput.get("value");this.serviceBrowser.setUrl(b).then(k.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.resolve()}),k.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.reject()}))}else a.reject();return a},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?
h.removeClass(this.btnOk,"jimu-state-disabled"):h.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array"],function(d,g,p,n){return d([g],{baseClass:"jimu-geocode-service-browser",
declaredClass:"jimu.dijit.GeocodeServiceBrowser",_leafType:"GeocodeServer",_serviceTypes:["GeocodeServer"],url:"",multiple:!1,getSelectedItems:function(){var b=this.inherited(arguments);return b=n.map(b,p.hitch(this,function(a){return{name:a.name,url:a.url}}))},_getIconImageName:function(b,a){}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/query dojo/on dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/dijit/_Tree dijit/registry esri/request jimu/dijit/Message jimu/dijit/LoadingShelter".split(" "),
function(d,g,p,n,b,a,c,h,m,k,s,e,f,q,x,l,u,v,y,C){return d([g,p,n,b],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_leafType:"",_serviceTypes:"",_def:null,url:"",multiple:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(b){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new s;(!b||!("string"===typeof b&&b.replace(/\/*$/g,"")))&&setTimeout(a.hitch(this,function(){this._def.reject()}),0);b=b.replace(/\/*$/g,
"");b=a.trim(b);var e=b.match(/^http(s?):\/\//gi);e&&0<e.length||(b="http://"+b);if(!(0>=b.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=b))return b=this._getRootItem(),(this._isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,b):this._isUrlContainsServiceType(this._currentUrl)?this._isUrlEndWithServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,b,!0):this._searchChildResource(this._currentUrl,b,!0):this._searchFolderServiceUrl(this._currentUrl,
b)).then(a.hitch(this,function(a){var b=this.tree.getAllLeafTreeNodeWidgets();1===b.length&&b[0].select();this._def.resolve(a)}),a.hitch(this,function(a){a&&(a.errorCode&&"NETWORK_ERROR"===a.errorCode)&&this._showRequestError();this._def.reject(a)})),this._def;setTimeout(a.hitch(this,function(){this._def.reject()}),0)},_isServiceTypeSupported:function(a){return 0<=h.indexOf(this._serviceTypes,a)},_getStringEndWith:function(a,b){var e="",l=a.indexOf(b);0<=l&&(e=a.slice(0,l+b.length));return e},_isUrlContainsServiceType:function(b){return h.some(this._serviceTypes,
a.hitch(this,function(a){return 0<=b.indexOf("/"+a)}))},_isUrlEndWithServiceType:function(b){return h.some(this._serviceTypes,a.hitch(this,function(a){return this._isStringEndWith(b,"/"+a)}))},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(a){var b="";a=a.split("/");return b=a[a.length-1]},_searchBaseServiceUrl:function(b,l){this.shelter.show();var c=new s;this._getRestInfo(b).then(a.hitch(this,function(f){if(this.domNode){h.forEach(f.services,
a.hitch(this,function(a){this._isServiceTypeSupported(a.type)&&(a={name:this._getServiceName(a.name),type:a.type,url:b+"/"+a.name+"/"+a.type,parent:l.id},this._addItem(a))}));var d=h.map(f.folders,a.hitch(this,function(a){return{name:a,type:"folder",url:b+"/"+a,parent:l.id}}));0===d.length?(this.shelter.hide(),c.resolve()):(f=h.map(d,a.hitch(this,function(a){return this._getRestInfo(a.url)})),e(f).then(a.hitch(this,function(e){this.domNode&&(this.shelter.hide(),h.forEach(e,a.hitch(this,function(e,
l){var c=d[l],f=h.filter(e.services,a.hitch(this,function(a){return this._isServiceTypeSupported(a.type)}));0<f.length&&(c=this._addItem(c),h.forEach(f,a.hitch(this,function(a){a={name:this._getServiceName(a.name),type:a.type,url:b+"/"+a.name+"/"+a.type,parent:c.id};this._addItem(a)})))})),c.resolve())}),a.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),c.resolve())})))}}),a.hitch(this,function(a){console.error("request layer info failed",a);this.domNode&&(this.shelter.hide(),
c.reject({errorCode:"NETWORK_ERROR",error:a}))}));return c},_searchFolderServiceUrl:function(b,e){var c=new s,l=this._getBaseServiceUrl();this.shelter.show();this._getRestInfo(b).then(a.hitch(this,function(b){this.domNode&&(this.shelter.hide(),b.services&&0<b.services.length&&h.forEach(b.services,a.hitch(this,function(a){this._isServiceTypeSupported(a.type)&&(a={name:this._getServiceName(a.name),type:a.type,url:l+"/"+a.name+"/"+a.type,parent:e.id},this._addItem(a))})),c.resolve())}),a.hitch(this,
function(a){console.error(a);this.domNode&&(this.shelter.hide(),c.reject({errorCode:"NETWORK_ERROR",error:a}))}));return c},_searchServiceUrl:function(b,e){var c=new s;b=b.replace(/\/*$/g,"");var l=b.split("/"),h=l[l.length-1],f=l[l.length-2];this.shelter.show();this._getRestInfo(b).then(a.hitch(this,function(l){if(this.domNode){l.url=b;this.shelter.hide();var d={name:f,type:h,url:b,parent:e.id},d=this._addItem(d);this._searchServiceUrlCallback(b,d,l).then(a.hitch(this,function(){this.domNode&&c.resolve()}),
a.hitch(this,function(a){console.error(a)}))}}),a.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),c.reject({errorCode:"NETWORK_ERROR",error:a}))}));return c},_searchServiceUrlCallback:function(b,e,l){var c=new s;setTimeout(a.hitch(this,function(){c.resolve()}),0);return c},_searchChildResource:function(b,e,c){var l=new s;setTimeout(a.hitch(this,function(){l.resolve()}),0);return l},_getRestInfo:function(a){return v({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback",
timeout:2E4})},_isStringEndWith:function(a,b){return a.lastIndexOf(b)+b.length===a.length},_clear:function(){var b=this._store.query({parent:"root"});h.forEach(b,a.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_showRequestError:function(){new y({message:this.nls.unableConnectTo+" "+this._currentUrl})},_addItem:function(a){this._id++;a.id=this._id.toString();this._store.add(a);return a},_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var b=
this._getRootItem(),b=new f({data:[b],getChildren:function(a){return this.query({parent:a.id})}});this._store=new q(b);b=new x({store:this._store,query:{id:"root"},mayHaveChildren:a.hitch(this,this._mayHaveChildren)});this.tree=new l({multiple:this.multiple,model:b,showRoot:!1,leafType:this._leafType,style:{width:"100%"},onOpen:a.hitch(this,function(a,b){this._onTreeOpen(a,b)}),onClick:a.hitch(this,function(a,b,e){this._onTreeClick(a,b,e)}),getIconStyle:a.hitch(this,function(a,b){var e=null;if(!a)return null;
var l={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},c=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),h=this._getIconImageName(a,b);h||("folder"===a.type?h=b?"folder_open.png":"folder_close.png":this._isServiceTypeSupported(a.type)&&(h=b?"folder_open.png":"folder_close.png"));h&&(l.backgroundImage="url("+c+"/css/images/"+h+")",e=l);return e})});c.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},
_getIconImageName:function(a,b){},_mayHaveChildren:function(a){return a.type!==this._leafType},_onTreeOpen:function(a,b){},_onTreeClick:function(a,b,e){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(d,g,p,n){d=function(b){function a(a,e){var c=b[a];c&&(b[a]=function(h){var d;"put"===a&&(d=b.getIdentity(h));if(k)return c.apply(this,
arguments);k=!0;try{var l=c.apply(this,arguments);p(l,function(a){e("object"==typeof a&&a||h,d)});return l}finally{k=!1}})}var c=[],h=0;b=g.delegate(b);b.notify=function(a,b){h++;for(var f=c.slice(),d=0,m=f.length;d<m;d++)f[d](a,b)};var d=b.query;b.query=function(a,e){e=e||{};var f=d.apply(this,arguments);if(f&&f.forEach){var q=g.mixin({},e);delete q.start;delete q.count;var k=b.queryEngine&&b.queryEngine(a,q),l=h,u=[],v;f.observe=function(a,d){1==u.push(a)&&c.push(v=function(a,c){p(f,function(f){var q=
f.length!=e.count,m,y;if(++l!=h)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var s,g=-1,p=-1;if(void 0!==c){m=0;for(y=f.length;m<y;m++){var v=f[m];if(b.getIdentity(v)==c){s=v;g=m;(k||!a)&&f.splice(m,1);break}}}if(k){if(a&&(k.matches?k.matches(a):k([a]).length))m=-1<g?g:f.length,f.splice(m,0,a),p=n.indexOf(k(f),a),f.splice(m,1),e.start&&0==p||!q&&p==f.length?p=-1:f.splice(p,0,a)}else a&&(void 0!==c?p=g:e.start||(p=b.defaultIndex||0,f.splice(p,0,
a)));if((-1<g||-1<p)&&(d||!k||g!=p)){q=u.slice();for(m=0;f=q[m];m++)f(a||s,g,p)}})});var q={};q.remove=q.cancel=function(){var b=n.indexOf(u,a);-1<b&&(u.splice(b,1),u.length||c.splice(n.indexOf(c,v),1))};return q}}return f};var k;a("put",function(a,c){b.notify(a,c)});a("add",function(a){b.notify(a)});a("remove",function(a){b.notify(void 0,a)});return b};g.setObject("dojo.store.Observable",d);return d})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),
function(d,g,p,n,b,a,c){return p("dijit.tree.ObjectStoreModel",c,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){b.mixin(this,a);this.childrenCache={}},getRoot:function(c,d){if(this.root)c(this.root);else{var k=this.store.query(this.query);k.then&&this.own(k);a(k,b.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];c(this.root);k.observe&&k.observe(b.hitch(this,
function(a){this.onChange(a)}),!0)}),d)}},mayHaveChildren:function(){return!0},getChildren:function(c,d,k){var g=this.store.getIdentity(c);if(this.childrenCache[g])a(this.childrenCache[g],d,k);else{var e=this.childrenCache[g]=this.store.getChildren(c);e.then&&this.own(e);e.observe&&this.own(e.observe(b.hitch(this,function(f,d,m){this.onChange(f);d!=m&&a(e,b.hitch(this,"onChildrenChange",c))}),!0));a(e,d,k)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},
newItem:function(a,b,c,d){return this.store.put(a,{parent:b,before:d})},pasteItem:function(a,c,k,g,e,f){var q=new n;if(c===k&&!g&&!f)return q.resolve(!0),q;c&&!g?this.getChildren(c,b.hitch(this,function(b){b=[].concat(b);var l=d.indexOf(b,a);b.splice(l,1);this.onChildrenChange(c,b);q.resolve(this.store.put(a,{overwrite:!0,parent:k,oldParent:c,before:f}))})):q.resolve(this.store.put(a,{overwrite:!0,parent:k,oldParent:c,before:f}));return q},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},
"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(d,g,p,n,b,a,c,h,m,k,s,e,f,q){var x=d([f._TreeNode,s],{templateString:n,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree-node");
this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=a.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=a.toDom('\x3cinput type\x3d"checkbox" /\x3e');a.addClass(this.checkNode,"jimu-tree-check-node");a.place(this.checkNode,this.contentNode,"first");this.own(k(this.checkNode,"click",b.hitch(this,this._onClick)));this.isLeaf?a.setStyle(this.checkNode,"display","inline"):a.setStyle(this.checkNode,"display","none")},select:function(){this.isLeaf&&(this.checkNode.checked=
!0)},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1)},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(b.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return d([f,s],{declaredClass:"jimu._Tree",leafType:"",multiple:!0,
uniqueId:"",postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+q.getRandomString()},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree")},removeItem:function(a){this.model.store.remove(a)},getAllItems:function(){var a=this.getAllTreeNodeWidgets();return c.map(a,b.hitch(this,function(a){var c=b.mixin({},a.item);c.selected=a.checkNode.checked;return c}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=c.filter(a,b.hitch(this,
function(a){return a.checkNode.checked}));return c.map(a,b.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var e=this.getAllTreeNodeWidgets(),e=c.map(e,b.hitch(this,function(a){var c=b.mixin({},a.item);c.selected=a.checkNode.checked;return c}));return c.filter(e,b.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var d=e.byNode(b[c]);if(d.item.id.toString()===a.toString())return d}return null},selectItem:function(a){(a=
this.getTreeNodeByItemId(a))&&a.isLeaf&&a.select()},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return c.filter(a,b.hitch(this,function(a){return a.isLeaf}))},getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return c.map(a,b.hitch(this,function(a){return e.byNode(a)}))},isLeafItem:function(a){return a&&a.type===this.leafType},_getAllTreeNodeDoms:function(){return m(".dijitTreeNode",
this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new x(a)},_onTreeNodeSelect:function(a){a={item:b.mixin({},a.item),treeNode:a};this.emit("item-select",a)},_onTreeNodeUnselect:function(a){a={item:b.mixin({},a.item),treeNode:a};this.emit("item-unselect",a)},_onCheckNodeClick:function(a,c,e){!this.multiple&&c&&this._uncheckAllCheckboxes();h.stop(e);this.focusNode(a);setTimeout(b.hitch(this,function(){a.checkNode.checked=c;this.onClick(a.item,
a,e)}),0)},_uncheckAllCheckboxes:function(){var a=m(".jimu-tree-check-node",this.domNode);c.forEach(a,b.hitch(this,function(a){a.checked=!1}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(d,g,p,n,b,a,c,h,m,k,s,e,f,q,x,l,u,v,y,C,D,J,A,E,G,F,H,K,I,M,L,N,Q,O,P){function w(a){return l.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var B=n("dijit._TreeNode",[G,F,H,K,I],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a)},labelType:"text",isExpandable:null,isExpanded:!1,state:"NotLoaded",
templateString:L,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";k.set(this.domNode,"backgroundPosition",b+" 0px");k.set(this.rowNode,
this.isLeftToRight()?"paddingLeft":"paddingRight",b);d.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,"row","Row");this.tree._startPaint(!0)},
_applyClassAndStyle:function(a,b,c){var e="_"+b+"Class";b+="Node";var d=this[e];this[e]=this.tree["get"+c+"Class"](a,this.isExpanded);h.replace(this[b],this[e]||"",d||"");k.set(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;h.toggle(this.domNode,"dijitTreeIsRoot",a);h.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=["dijitTreeExpandoLoading",
"dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;h.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return w(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role",
"group");h.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=e.wipeIn({node:this.containerNode,duration:E.defaultDuration}),c=this._expandDeferred=new b(function(){a.stop()});g.after(a,"onEnd",function(){c.resolve(!0)},!0);a.play();return w(c)},collapse:function(){if(this._collapseDeferred)return w(this._collapseDeferred);this._expandDeferred&&
(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");h.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=e.wipeOut({node:this.containerNode,duration:E.defaultDuration}),c=this._collapseDeferred=new b(function(){a.stop()});g.after(a,"onEnd",function(){c.resolve(!0)},
!0);a.play();return w(c)},indent:0,setChildItems:function(b){var r=this.tree,e=r.model,f=[],h=r.focusedChild,q=this.getChildren();d.forEach(q,function(a){H.prototype.removeChild.call(this,a)},this);this.defer(function(){d.forEach(q,function(a){if(!a._destroyed&&!a.getParent()){r.dndController.removeTreeNode(a);var b=function(a){var t=e.getIdentity(a.item),c=r._itemNodesMap[t];1==c.length?delete r._itemNodesMap[t]:(t=d.indexOf(c,a),-1!=t&&c.splice(t,1));d.forEach(a.getChildren(),b)};b(a);if(r.persist){var t=
d.map(a.getTreePath(),function(a){return r.model.getIdentity(a)}).join("/"),f;for(f in r._openedNodes)f.substr(0,t.length)==t&&delete r._openedNodes[f];r._saveExpandedNodes()}r.lastFocusedChild&&!c.isDescendant(r.lastFocusedChild,r.domNode)&&delete r.lastFocusedChild;h&&!c.isDescendant(h,r.domNode)&&r.focus();a.destroyRecursive()}})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,d.forEach(b,function(a){var b=e.getIdentity(a),t=r._itemNodesMap[b],c;if(t)for(var d=0;d<t.length;d++)if(t[d]&&
!t[d].getParent()){c=t[d];c.set("indent",this.indent+1);break}c||(c=this.tree._createTreeNode({item:a,tree:r,isExpandable:e.mayHaveChildren(a),label:r.getLabel(a),labelType:r.model&&r.model.labelType||"text",tooltip:r.getTooltip(a),ownerDocument:r.ownerDocument,dir:r.dir,lang:r.lang,textDir:r.textDir,indent:this.indent+1}),t?t.push(c):r._itemNodesMap[b]=[c]);this.addChild(c);(this.tree.autoExpand||this.tree._state(c))&&f.push(r._expandNode(c))},this),d.forEach(this.getChildren(),function(a){a._updateLayout()})):
this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=a(f);this.tree._startPaint(b);return w(b)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,this.collapse());d.forEach(b,function(a){a._updateLayout()})},
makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");h.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){J.focus(this.focusNode)}});f("dojo-bidi")&&B.extend({_setTextDirAttr:function(a){if(a&&(this.textDir!=a||!this._created))this._set("textDir",a),this.applyTextDir(this.labelNode),d.forEach(this.getChildren(),function(b){b.set("textDir",a)},this)}});var z=n("dijit.Tree",[G,M,F,I],{baseClass:"dijitTree",
store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:N,persist:!1,autoExpand:!1,dndController:P,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,
b){v.publish(this.id,l.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new b;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(u(this.containerNode,u.selector(".dijitTreeNode",y.enter),function(b){a._onNodeMouseEnter(A.byNode(this),
b)}),u(this.containerNode,u.selector(".dijitTreeNode",y.leave),function(b){a._onNodeMouseLeave(A.byNode(this),b)}),u(this.containerNode,u.selector(".dijitTreeRow",D.press),function(b){a._onNodePress(A.getEnclosingWidget(this),b)}),u(this.containerNode,u.selector(".dijitTreeRow",D),function(b){a._onClick(A.getEnclosingWidget(this),b)}),u(this.containerNode,u.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(A.getEnclosingWidget(this),b)}));this.model||this._store2model();this.own(g.after(this.model,
"onChange",l.hitch(this,"_onItemChange"),!0),g.after(this.model,"onChildrenChange",l.hitch(this,"_onItemChildrenChange"),!0),g.after(this.model,"onDelete",l.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){l.isString(this.dndController)&&(this.dndController=l.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);this.dndController=new this.dndController(this,b)}this._load();
this.onLoadDeferred=w(this.pendingCommandsPromise);this.onLoadDeferred.then(l.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;q.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=l.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(a.getChildren=l.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&
a===this.model.root?null:a,b,c)}));this.model=new O(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(l.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display=
"none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),b.labelNode.setAttribute("role","presentation"),
b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(l.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),
l.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=l.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(l.hitch(this,function(){var c=d.map(a,function(a){return!a||l.isString(a)?a:b.model.getIdentity(a)}),e=[];d.forEach(c,function(a){e=
e.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",e)}))},_setPathAttr:function(a){return a.length?w(this.set("paths",[a]).then(function(a){return a[0]})):w(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(b){function c(a,b){var t=a.shift(),f=d.filter(b,function(a){return a.getIdentity()==t})[0];if(f)return a.length?e._expandNode(f).then(function(){return c(a,f.getChildren())}):f;throw new z.PathError("Could not expand path at "+t);}var e=this;return w(this.pendingCommandsPromise=
this.pendingCommandsPromise.always(function(){return a(d.map(b,function(a){a=d.map(a,function(a){return l.isString(a)?a:e.model.getIdentity(a)});if(a.length)return c(a,[e.rootNode]);throw new z.PathError("Empty path");}))}).then(function(a){e.set("selectedNodes",a);return e.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function b(e){return c._expandNode(e).then(function(){var c=d.filter(e.getChildren()||
[],function(a){return a.isExpandable});return a(d.map(c,b))})}var c=this;return w(b(this.rootNode))},collapseAll:function(){function b(e){var f=d.filter(e.getChildren()||[],function(a){return a.isExpandable}),f=a(d.map(f,b));return!e.isExpanded||e==c.rootNode&&!c.showRoot?f:f.then(function(){return c._collapseNode(e)})}var c=this;return w(b(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||
this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&b.isExpanded&&b.hasChildren();)c=b.getChildren(),b=c[c.length-1];else if(c=b.getParent(),
this.showRoot||c!==this.rootNode)b=c;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&(c.isTreeNode&&(this.showRoot||c!==this.rootNode))&&this.focusNode(c)}},focusLastChild:function(){var a=this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?
this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return c.isDescendant(a,b.expandoNode)||c.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,
b){this.focusNode(a)},__click:function(a,b,c,e){var f=this.isExpandoNode(b.target,a);a.isExpandable&&(c||f)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[e](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):
this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){q.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){q.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;
if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var c=this.model,e=a.item,f=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new b,c.getChildren(e,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(f,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));
c=a._loadDeferred.then(l.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(c);return c},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),e=this.getTooltip(a);d.forEach(b,function(b){b.set({item:a,label:c,tooltip:e});b._updateItemClasses(a)})}},
_onItemChildrenChange:function(a,b){var c=this.model.getIdentity(a);(c=this._itemNodesMap[c])&&d.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(d.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!c.isDescendant(this.lastFocusedChild,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!c.isDescendant(this.focusedChild,this.domNode)&&
this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=p(this.cookieName);a&&d.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=d.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},
_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);p(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!l.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&m.setMarginBox(this.domNode,
a);this._nodePixelIndent=m.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(l.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=l.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&(!this._adjustWidthsTimer&&
this._started)&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});C(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new B(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});f("dojo-bidi")&&z.extend({_setTextDirAttr:function(a){a&&
this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});z.PathError=s("TreePathError");z._TreeNode=B;return z})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(d,g,p,n){return p("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(b){n.mixin(this,b);this.connects=[];b=this.store;
if(!b.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");b.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([g.after(b,"onNew",n.hitch(this,"onNewItem"),!0),g.after(b,"onDelete",n.hitch(this,"onDeleteItem"),!0),g.after(b,"onSet",n.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var b;b=this.connects.pop();)b.remove()},getRoot:function(b,a){this.root?b(this.root):this.store.fetch({query:this.query,
onComplete:n.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];b(this.root)}),onError:a})},mayHaveChildren:function(b){return d.some(this.childrenAttrs,function(a){return this.store.hasAttribute(b,a)},this)},getChildren:function(b,a,c){var h=this.store;if(h.isItemLoaded(b)){for(var m=[],k=0;k<this.childrenAttrs.length;k++)var g=h.getValues(b,this.childrenAttrs[k]),m=m.concat(g);var e=0;
this.deferItemLoadingUntilExpand||d.forEach(m,function(a){h.isItemLoaded(a)||e++});0==e?a(m):d.forEach(m,function(b,f){h.isItemLoaded(b)||h.loadItem({item:b,onItem:function(b){m[f]=b;0==--e&&a(m)},onError:c})})}else{var f=n.hitch(this,arguments.callee);h.loadItem({item:b,onItem:function(b){f(b,a,c)},onError:c})}},isItem:function(b){return this.store.isItem(b)},fetchItemByIdentity:function(b){this.store.fetchItemByIdentity(b)},getIdentity:function(b){return this.store.getIdentity(b)},getLabel:function(b){return this.labelAttr?
this.store.getValue(b,this.labelAttr):this.store.getLabel(b)},newItem:function(b,a,c){var d={parent:a,attribute:this.childrenAttrs[0]},m;this.newItemIdAttr&&b[this.newItemIdAttr]?this.fetchItemByIdentity({identity:b[this.newItemIdAttr],scope:this,onItem:function(k){k?this.pasteItem(k,null,a,!0,c):(m=this.store.newItem(b,d))&&void 0!=c&&this.pasteItem(m,a,a,!1,c)}}):(m=this.store.newItem(b,d))&&void 0!=c&&this.pasteItem(m,a,a,!1,c)},pasteItem:function(b,a,c,h,m){var k=this.store,g=this.childrenAttrs[0];
a&&d.forEach(this.childrenAttrs,function(c){if(k.containsValue(a,c,b)){if(!h){var e=d.filter(k.getValues(a,c),function(a){return a!=b});k.setValues(a,c,e)}g=c}});if(c)if("number"==typeof m){var e=k.getValues(c,g).slice();e.splice(m,0,b);k.setValues(c,g,e)}else k.setValues(c,g,k.getValues(c,g).concat(b))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(b,a){a&&this.getChildren(a.item,n.hitch(this,function(b){this.onChildrenChange(a.item,b)}))},onDeleteItem:function(b){this.onDelete(b)},
onSetItem:function(b,a){if(-1!=d.indexOf(this.childrenAttrs,a))this.getChildren(b,n.hitch(this,function(a){this.onChildrenChange(b,a)}));else this.onChange(b)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(d,g,p,n,b){return g("dijit.tree.ForestStoreModel",b,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,
children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,d){a===this.root?this.root.children?b(this.root.children):this.store.fetch({query:this.query,onComplete:n.hitch(this,function(a){this.root.children=a;b(a)}),onError:d}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var b=a.scope||p.global;a.onItem&&a.onItem.call(b,
this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b,d){return b===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,d,g,k){if(b===this.root&&!g)this.onLeaveRoot(a);this.inherited(arguments,[a,b===this.root?null:b,d===this.root?null:d,g,
k]);if(d===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:n.hitch(this,function(b){this.root.children=b;if(a.length!=b.length||d.some(a,function(a,d){return b[d]!=a}))this.onChildrenChange(this.root,b)})})},onNewItem:function(a,b){this._requeryTop();this.inherited(arguments)},
onDeleteItem:function(a){-1!=d.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,b,d,g){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(d,g,p,n,b,a,c,h,m,k,s){return g("dijit.tree._dndSelector",s,{constructor:function(){this.selection=
{};this.anchor=null;this.events.push(h(this.tree.domNode,m.press,n.hitch(this,"onMouseDown")),h(this.tree.domNode,m.release,n.hitch(this,"onMouseUp")),h(this.tree.domNode,m.move,n.hitch(this,"onMouseMove")),h(this.tree.domNode,k.press,n.hitch(this,"onClickPress")),h(this.tree.domNode,k.release,n.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,c;for(c in b)a.push(b[c]);return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);
this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(b){var c=d.filter(this.getSelectedTreeNodes(),function(c){return!a.isDescendant(c.domNode,b.domNode)});this.setSelection(c);return b},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=this.getSelectedTreeNodes();d.forEach(this._setDifference(b,a),n.hitch(this,function(a){a.setSelected(!1);
this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));d.forEach(this._setDifference(a,b),n.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){d.forEach(b,function(a){a.__exclude__=!0});var c=d.filter(a,function(a){return!a.__exclude__});d.forEach(b,function(a){delete a.__exclude__});return c},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=[],c=[];d.forEach(a,function(a){var e=a.getTreePath();
c.push(a);b.push(e)},this);a=d.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!this.current||!this.current.isExpandable||!this.tree.isExpandoNode(a.target,this.current)){"mousedown"==a.type&&c.isLeft(a)&&a.preventDefault();var d="keydown"==a.type?this.tree.focusedChild:this.current;
if(d){var h=b.getCopyKeyState(a),g=d.id;!this.singular&&!a.shiftKey&&this.selection[g]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(d,h,a.shiftKey))}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,b.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-
b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);var d=doc.createRange();d.setStartBefore(b);return c.compareBoundaryPoints(c.END_TO_END,d)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,b,c){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&
this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);c=this.anchor;0>b?b=c:(b=a,a=c);for(c=[];b!=a;)c.push(b),b=this.tree._getNext(b);c.push(a);this.setSelection(c)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,b){b=b||p.global;for(var c in this.selection)a.call(b,this.getItem(c),c,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),
function(d,g,p,n,b,a){return g("dijit.tree._dndContainer",null,{constructor:function(c,h){this.tree=c;this.node=c.domNode;n.mixin(this,h);this.containerState="";p.add(this.node,"dojoDndContainer");this.events=[b(this.node,a.enter,n.hitch(this,"onOverEvent")),b(this.node,a.leave,n.hitch(this,"onOutEvent")),d.after(this.tree,"_onNodeMouseEnter",n.hitch(this,"onMouseOver"),!0),d.after(this.tree,"_onNodeMouseLeave",n.hitch(this,"onMouseOut"),!0),b(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},
destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,b){var d="dojoDnd"+a,g=a.toLowerCase()+"State";p.replace(this.node,d+b,d+this[g]);this[g]=b},_addItemClass:function(a,b){p.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){p.remove(a,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container",
"")}})})},"widgets/Geocoder/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/_BasicServiceChooser.html":'\x3cdiv\x3e\n\t\x3ctable class\x3d"layout"\x3e\n\t\t\x3ccolgroup\x3e\n\t\t  \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\n\t\t  \x3ccol width\x3d"100px;"\x3e\x3c/col\x3e\n\t  \x3c/colgroup\x3e\n\t\t\x3ctbody\x3e\n\t\t\t\x3ctd\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\n\t\t\t\x3c/td\x3e\n\t\t\t\x3ctd\x3e\n\t\t\t\t\x3cdiv class\x3d"jimu-btn set-source" data-dojo-attach-point\x3d"btnSetSource" data-dojo-attach-event\x3d"onclick:_onBtnSetSourceClick"\x3e${nls.set}\x3c/div\x3e\n\t\t\t\x3c/td\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"content-section"\x3e\n\t\t\x3ctable class\x3d"layout"\x3e\n\t\t\t\x3ccolgroup\x3e\n\t\t\t\t\x3ccol width\x3d"80px;" align\x3d"right"\x3e\x3c/col\x3e\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\n\t\t\t\t\x3ccol width\x3d"100px;"\x3e\x3c/col\x3e\n\t\t\t\x3c/colgroup\x3e\n\t\t\t\x3ctbody\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\n\t\t\t\t\t\t\x3cspan\x3e${nls.example}:\x3c/span\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/tbody\x3e\n\t\t\x3c/table\x3e\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"operations"\x3e\n\t\t\x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\n\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\n\t\t\x3c/span\n\t\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',"url:widgets/Geocoder/setting/Edit.html":'\x3cdiv\x3e\n  \x3ctable class\x3d"setting-table input-table" cellspacing\x3d"0"\x3e\n    \x3ctbody\x3e\n      \x3ctr\x3e\n        \x3ctd class\x3d"first"\x3e*${nls.url}\x3c/td\x3e\n        \x3ctd class\x3d"second"\x3e\n          \x3cdiv class\x3d"service-chooser" data-dojo-attach-point\x3d"serviceChooser" /\x3e\n        \x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr class\x3d"example"\x3e\n        \x3ctd class\x3d"first"\x3e\x3c/td\x3e\n        \x3ctd class\x3d"second"\x3e\n          \x3cspan class\x3d"example"\x3e${nls.example}: http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer\x3c/span\x3e\n        \x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\n        \x3ctd class\x3d"first"\x3e*${nls.name}\x3c/td\x3e\n        \x3ctd class\x3d"second"\x3e\n          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"geocodeName" \n          placeHolder\x3d"${nls.geocoderNamePlaceHolder}"\n          required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'/\x3e\n        \x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\n        \x3ctd class\x3d"first"\x3e${nls.placeholder}\x3c/td\x3e\n        \x3ctd class\x3d"second"\x3e\n          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"geocodePlaceholder" \n          placeHolder\x3d"${nls.geocodePlaceHolder}" data-dojo-props\x3d\'style:{width:"100%"}\'/\x3e\n        \x3c/td\x3e\n      \x3c/tr\x3e\n    \x3c/tbody\x3e\n  \x3c/table\x3e\n\x3c/div\x3e',
"url:widgets/Geocoder/setting/Setting.html":'\x3cdiv style\x3d"width:100%;"\x3e\n  \x3cdiv class\x3d"instruction"\x3e\n    \x3cspan class\x3d"instruction-inner"\x3e${nls.instruction}\x3c/span\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"add-geocoder" data-dojo-attach-event\x3d"onclick: onAddGeocoderClick"\x3e\n    \x3cspan class\x3d"add-geocoder-icon"\x3e\x3c/span\x3e\n    \x3cspan class\x3d"add-geocoder-label"\x3e${nls.add}\x3c/span\x3e\n  \x3c/div\x3e\n  \x3cdiv data-dojo-attach-point\x3d"tableGeocoders"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:widgets/Geocoder/setting/css/style.css":".jimu-widget-geocoder-setting{margin:0; padding:0; font-size:15px;}.jimu-geocoder-Edit .setting-table{width: 100%;}.jimu-geocoder-Edit .jimu-basic-service-chooser{width: 100%;}.jimu-geocoder-Edit .setting-table \x3e thead \x3e tr \x3e th,.jimu-geocoder-Edit .setting-table \x3e tbody \x3e tr \x3e td{height:40px; vertical-align:middle;}.jimu-geocoder-Edit .setting-table \x3e tbody \x3e tr.example \x3e td{height:20px; vertical-align:middle;}.jimu-geocoder-Edit{font-size: 14px;}.jimu-geocoder-Edit .input-table \x3e tbody \x3e tr \x3e .first{width:auto; text-align: right; padding-right:15px;}.jimu-geocoder-Edit .input-table \x3e tbody \x3e tr \x3e .second{width:450px;}.jimu-geocoder-Edit .input-table \x3e tbody \x3e tr \x3e .second .example{font-style: italic; font-size: 12px; color: #a0acbf; width: 100%; display: inline-block;}.jimu-widget-geocoder-setting .add-geocoder{margin: 5px 0; cursor: pointer; display: inline-block;}.jimu-widget-geocoder-setting .add-geocoder-icon{background-image: url(images/add_icon.png); background-repeat: no-repeat; background-position: center; width: 14px; height: 14px; display: inline-block; vertical-align: middle;}.jimu-widget-geocoder-setting .add-geocoder-label{font-size: 14px; color: #518dca; margin-left: 10px; display: inline-block; height: 100%; text-decoration: underline;}",
"*now":function(d){d(['dojo/i18n!*preload*widgets/Geocoder/setting/nls/Setting*["ar","cs","da","de","en","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dojo/keys dojo/Deferred dojo/promise/all dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/SimpleTable jimu/dijit/LoadingShelter jimu/dijit/Message jimu/dijit/Popup ./Edit esri/request jimu/dijit/CheckBox jimu/portalUtils".split(" "),function(d,g,p,n,b,a,c,h,m,k,s,e,f,q,x,l,u,v){return d([k,m],{baseClass:"jimu-widget-geocoder-setting",defaultGeocodeUrl:"geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",
edit:null,popup:null,popupState:"",editTr:null,postCreate:function(){this.inherited(arguments);this.shelter=new e({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup()},startup:function(){this.inherited(arguments);this.config.geocoder||(this.config.geocoder={});this.displayFieldsTable=new s({fields:[{name:"url",title:this.nls.url,type:"text",editable:!1,hidden:!0,unique:!0},{name:"name",title:this.nls.name,type:"text",editable:!1,unique:!0},{name:"singleLineFieldName",title:this.nls.singleLineFieldName,
type:"text",hidden:!0,editable:!1},{name:"placeholder",title:this.nls.placeholder,type:"text",editable:!1,hidden:!0},{name:"",title:"",width:"100px",type:"actions",actions:["edit","up","down","delete"]}],selectable:!1});this.displayFieldsTable.placeAt(this.tableGeocoders);this.own(b(this.displayFieldsTable,"actions-edit",g.hitch(this,"_onEditClick")));this.displayFieldsTable.startup();this._preProcessConfig()},setConfig:function(a){this.config=a;this.displayFieldsTable.clear();if(a.geocoder.geocoders){for(var b=
[],c=a.geocoder.geocoders.length,d=0;d<c;d++)b.push({url:a.geocoder.geocoders[d].url,name:a.geocoder.geocoders[d].name,singleLineFieldName:a.geocoder.geocoders[d].singleLineFieldName,placeholder:a.geocoder.geocoders[d].placeholder});this.displayFieldsTable.addRows(b)}},_preProcessConfig:function(){this.config.geocoder.geocoders&&this.config.geocoder.geocoders.length?this.setConfig(this.config):this._addGeocodersFromProtal(this.appConfig.portalUrl)},onAddGeocoderClick:function(){this.popupState="ADD";
this._openEdit(this.nls.add,{})},_onEditClick:function(a){var b=this.displayFieldsTable.getRowData(a);this.popupState="EDIT";this.editTr=a;this._openEdit(this.nls.edit,b)},_openEdit:function(b,c){this.edit=new x({nls:this.nls,config:c||{}});this.popup=new q({titleLabel:b,autoHeight:!0,content:this.edit,container:"main-page",width:640,height:300,buttons:[{label:this.nls.ok,key:a.ENTER,disable:!0,onClick:g.hitch(this,"_onEditOk")},{label:this.nls.cancel,key:a.ESCAPE}],onClose:g.hitch(this,"_onEditClose")});
n.addClass(this.popup.domNode,"widget-setting-popup");this.edit.startup()},_getGeocodeName:function(a){if("string"!==typeof a)return"geocoder";a=a.split("/");return a[a.length-2]||"geocoder"},_getSingleLine:function(a){var b=new c;a.singleLineFieldName?b.resolve(a):l({url:a.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(g.hitch(this,function(c){c.singleLineAddressField&&c.singleLineAddressField.name?(a.singleLineFieldName=c.singleLineAddressField.name,b.resolve(a)):(console.warn(a.url+
"has no singleLineFieldName"),b.resolve(null))}),g.hitch(this,function(a){console.error(a);b.resolve(null)}));return b},_addGeocodersFromProtal:function(a){v.getPortalSelfInfo(a).then(g.hitch(this,function(a){a=a.helperServices&&a.helperServices.geocode;var b=[];if(a&&0<a.length){for(var c=0,d=a.length;c<d;c++){var e=a[c];e&&b.push(this._getSingleLine(e))}h(b).then(g.hitch(this,function(a){for(var b=0;b<a.length;b++){var c=a[b];c&&(c={name:c.name||this._getGeocodeName(c.url),url:c.url,singleLineFieldName:c.singleLineFieldName,
placeholder:c.placeholder||c.name||this._getGeocodeName(c.url)},this.displayFieldsTable.addRow(c))}this.shelter.hide()}))}}),g.hitch(this,function(a){this.shelter.hide();new f({message:this.nls.portalConnectionError});console.error(a)}))},_onEditOk:function(){var a=this.edit.getConfig(),b=null;!a.url||!a.name||!a.singleLineFieldName?new f({message:this.nls.warning}):("ADD"===this.popupState?b=this.displayFieldsTable.addRow(a):"EDIT"===this.popupState&&(b=this.displayFieldsTable.editRow(this.editTr,
a)),b.success?(this.popup.close(),this.popupState="",this.editTr=null):(a=p.map(b.repeatFields,g.hitch(this,function(a){return a&&a.title})),new f({message:this.nls[b.errorCode]+a.toString()})))},_onEditClose:function(){this.popup=this.edit=null},getConfig:function(){for(var a=this.displayFieldsTable.getData(),b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);this.config.geocoder.arcgisGeocoder=0<b.length?!1:{placeholder:"Find address or place"};this.config.geocoder.geocoders=b;return this.config}})});